name: Keep Streamlit Apps Alive

on:
  schedule:
    - cron: "0 */6 * * *"   # Every 6 hours
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Wake Streamlit apps
        shell: bash
        run: |
          urls=(
            "https://bukky-ml-project-health-insurance-prediction.streamlit.app/"
            "https://bukky-ml-project-credit-risk-model.streamlit.app/"
            "https://bukky-research-tool.streamlit.app/"
            "https://bukky-vehicle-damage-prediction.streamlit.app/"
          )

          for url in "${urls[@]}"; do
            echo "Waking $url"
            curl -L --max-time 60 --max-redirs 5 --fail "$url"
            sleep 10
          done
